import{Scene as v,OrthographicCamera as f,WebGLRenderer as w,TextureLoader as U,RepeatWrapping as E,LinearFilter as D,ShaderMaterial as _,PlaneBufferGeometry as z,Mesh as V}from"three";import P from"gsap/TweenMax";export default function(k){function q(){for(var v=arguments,f=0;f<arguments.length;f++)if(void 0!==v[f])return v[f]}var A=k.parent,J=k.displacementImage,K=k.image1,N=k.image2,Q=q(k.intensity1,k.intensity,1),X=q(k.intensity2,k.intensity,1),Y=q(k.angle,Math.PI/4),Z=q(k.angle1,Y),$=q(k.angle2,3*-Y),C=q(k.speedIn,k.speed,1.6),H=q(k.speedOut,k.speed,1.2),F=q(k.hover,!0),T=q(k.easing,Expo.easeOut);if(A)if(K&&N&&J){var B=new v,M=new f(A.offsetWidth/-2,A.offsetWidth/2,A.offsetHeight/2,A.offsetHeight/-2,1,1e3);M.position.z=1;var h=new w({antialias:!1});h.setPixelRatio(window.devicePixelRatio),h.setClearColor(16777215,0),h.setSize(A.offsetWidth,A.offsetHeight),A.appendChild(h.domElement);var R=function(){h.render(B,M)},S=new U;S.crossOrigin="";var W=S.load(K,R),j=S.load(N,R),G=S.load(J,R);G.wrapS=G.wrapT=E,W.magFilter=j.magFilter=D,W.minFilter=j.minFilter=D;var y=new _({uniforms:{intensity1:{type:"f",value:Q},intensity2:{type:"f",value:X},dispFactor:{type:"f",value:0},angle1:{type:"f",value:Z},angle2:{type:"f",value:$},texture1:{type:"t",value:W},texture2:{type:"t",value:j},disp:{type:"t",value:G}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"\nvarying vec2 vUv;\n\nuniform float dispFactor;\nuniform sampler2D disp;\n\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float angle1;\nuniform float angle2;\nuniform float intensity1;\nuniform float intensity2;\n\nmat2 getRotM(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n  return mat2(c, -s, s, c);\n}\n\nvoid main() {\n  vec4 disp = texture2D(disp, vUv);\n  vec2 dispVec = vec2(disp.r, disp.g);\n  vec2 distortedPosition1 = vUv + getRotM(angle1) * dispVec * intensity1 * dispFactor;\n  vec2 distortedPosition2 = vUv + getRotM(angle2) * dispVec * intensity2 * (1.0 - dispFactor);\n  vec4 _texture1 = texture2D(texture1, distortedPosition1);\n  vec4 _texture2 = texture2D(texture2, distortedPosition2);\n  gl_FragColor = mix(_texture1, _texture2, dispFactor);\n}\n",transparent:!0,opacity:1}),b=new z(A.offsetWidth,A.offsetHeight,1),l=new V(b,y);B.add(l),F&&(A.addEventListener("mouseenter",L),A.addEventListener("touchstart",L),A.addEventListener("mouseleave",O),A.addEventListener("touchend",O)),window.addEventListener("resize",function(v){h.setSize(A.offsetWidth,A.offsetHeight)}),this.next=L,this.previous=O}else console.warn("One or more images are missing");else console.warn("Parent missing");function L(){P.to(y.uniforms.dispFactor,C,{value:1,ease:T,onUpdate:R,onComplete:R})}function O(){P.to(y.uniforms.dispFactor,H,{value:0,ease:T,onUpdate:R,onComplete:R})}}
//# sourceMappingURL=hover-effect.es.js.map
